This file is part of MXE.
See index.html for further information.

Contains ad hoc patches for cross building.

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 29 May 2015 13:12:48 -0700
Subject: [PATCH] Include gettimeofday in libiax.


diff --git a/3rdparty/iaxclient/lib/libiax2/src/iax.c b/3rdparty/iaxclient/lib/libiax2/src/iax.c
index 1111111..2222222 100644
--- a/3rdparty/iaxclient/lib/libiax2/src/iax.c
+++ b/3rdparty/iaxclient/lib/libiax2/src/iax.c
@@ -36,6 +36,14 @@
 #include <sys/timeb.h>
 #endif
 
+#if defined(__MINGW32__)
+#include <sys/time.h>
+
+#if defined(_GETTIMEOFDAY_DEFINED)
+#define HAVE_GETTIMEOFDAY 1
+#endif
+#endif
+
 #define	snprintf _snprintf
 
 #if defined(_MSC_VER)

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 29 May 2015 18:27:55 -0700
Subject: [PATCH] Fix linking errors.


diff --git a/CMakeLists.txt b/CMakeLists.txt
index 1111111..2222222 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -310,7 +310,7 @@ if (ENABLE_QT)
 endif (ENABLE_QT)
 ##############################################################################
 
-find_package(PLIB REQUIRED puaux pu js fnt)
+find_package(PLIB REQUIRED puaux pu js fnt sl)
 
 # FlightGear and SimGear versions need to match
 find_package(SimGear ${FLIGHTGEAR_VERSION} REQUIRED)
diff --git a/src/Input/CMakeLists.txt b/src/Input/CMakeLists.txt
index 1111111..2222222 100644
--- a/src/Input/CMakeLists.txt
+++ b/src/Input/CMakeLists.txt
@@ -51,6 +51,7 @@ if(ENABLE_FGJS)
         ${SIMGEAR_CORE_LIBRARIES}
         ${PLIB_LIBRARIES}
         ${SIMGEAR_CORE_LIBRARY_DEPENDENCIES}
+        ws2_32
     )
 
     install(TARGETS fgjs RUNTIME DESTINATION bin)
@@ -67,4 +68,4 @@ if(ENABLE_JS_DEMO)
     install(TARGETS js_demo RUNTIME DESTINATION bin)
 endif()
 
-flightgear_component(Input "${SOURCES}" "${HEADERS}")
\ No newline at end of file
+flightgear_component(Input "${SOURCES}" "${HEADERS}")
diff --git a/utils/GPSsmooth/CMakeLists.txt b/utils/GPSsmooth/CMakeLists.txt
index 1111111..2222222 100644
--- a/utils/GPSsmooth/CMakeLists.txt
+++ b/utils/GPSsmooth/CMakeLists.txt
@@ -21,6 +21,7 @@ target_link_libraries(GPSsmooth
     ${SIMGEAR_CORE_LIBRARY_DEPENDENCIES}
     ${PLIB_SG_LIBRARY}
     ${PLIB_UL_LIBRARY}
+    ws2_32
 )
 
 target_link_libraries(MIDGsmooth
@@ -28,6 +29,7 @@ target_link_libraries(MIDGsmooth
     ${SIMGEAR_CORE_LIBRARY_DEPENDENCIES}
     ${PLIB_SG_LIBRARY}
     ${PLIB_UL_LIBRARY}
+    ws2_32
 )
 
 target_link_libraries(UGsmooth
@@ -36,6 +38,7 @@ target_link_libraries(UGsmooth
     ${PLIB_SG_LIBRARY}
     ${PLIB_UL_LIBRARY}
     ${ZLIB_LIBRARY}
+    ws2_32
 )
 
 install(TARGETS GPSsmooth MIDGsmooth UGsmooth RUNTIME DESTINATION bin)

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 29 May 2015 19:12:32 -0700
Subject: [PATCH] Fix header inclusion name.


diff --git a/src/GUI/WindowsFileDialog.cxx b/src/GUI/WindowsFileDialog.cxx
index 1111111..2222222 100644
--- a/src/GUI/WindowsFileDialog.cxx
+++ b/src/GUI/WindowsFileDialog.cxx
@@ -3,7 +3,11 @@
 #include "WindowsFileDialog.hxx"
 
 #include <windows.h>
+#if defined(_MSC_VER)
 #include <Shlobj.h>
+#else
+#include <shlobj.h>
+#endif
 
 #include <boost/foreach.hpp>
 
@@ -143,4 +147,4 @@ void WindowsFileDialog::chooseDir()
 	CoTaskMemFree(results);
 
 	_callback->onFileDialogDone(this, SGPath(pathBuf));
-}
\ No newline at end of file
+}
diff --git a/src/Main/fg_init.cxx b/src/Main/fg_init.cxx
index 1111111..2222222 100644
--- a/src/Main/fg_init.cxx
+++ b/src/Main/fg_init.cxx
@@ -34,7 +34,11 @@
 #if defined(SG_WINDOWS)
 #  include <io.h>               // isatty()
 #  include <process.h>          // _getpid()
-#  include <Windows.h>
+#  if defined(__MINGW32__)
+#    include <windows.h>
+#  else
+#    include <Windows.h>
+#  endif
 #  define isatty _isatty
 #else
 // for open() and options

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: "fix@me" <fix@me>
Date: Fri, 29 May 2015 19:28:19 -0700
Subject: [PATCH] Add additional underscore, so that it compiles on GCC.


diff --git a/src/Main/main.cxx b/src/Main/main.cxx
index 1111111..2222222 100644
--- a/src/Main/main.cxx
+++ b/src/Main/main.cxx
@@ -408,7 +408,7 @@ static void ATIScreenSizeHack()
 // Propose NVIDIA Optimus to use high-end GPU
 #if defined(SG_WINDOWS)
 extern "C" {
-    _declspec(dllexport) DWORD NvOptimusEnablement = 0x00000001;
+    __declspec(dllexport) DWORD NvOptimusEnablement = 0x00000001;
 }
 #endif
 

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Saikrishna Arcot <saiarcot895@gmail.com>
Date: Thu, 9 Jun 2016 10:27:29 -0500
Subject: [PATCH] Reorder an #include.


diff --git a/utils/fgpanel/FGGLApplication.cxx b/utils/fgpanel/FGGLApplication.cxx
index 1111111..2222222 100644
--- a/utils/fgpanel/FGGLApplication.cxx
+++ b/utils/fgpanel/FGGLApplication.cxx
@@ -22,6 +22,7 @@
 
 #include "FGGLApplication.hxx"
 #include <simgear/compiler.h>
+#include <iostream>
 
 #ifdef HAVE_WINDOWS_H
 #include <windows.h>
@@ -35,7 +36,6 @@
 #include <GL/glut.h>
 #endif
 
-#include <iostream>
 #include <exception>
 #include <stdio.h>
 

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Saikrishna Arcot <saiarcot895@gmail.com>
Date: Thu, 9 Jun 2016 10:31:37 -0500
Subject: [PATCH] Correct #include file name.


diff --git a/src/FDM/JSBSim/input_output/FGfdmSocket.cpp b/src/FDM/JSBSim/input_output/FGfdmSocket.cpp
index 1111111..2222222 100644
--- a/src/FDM/JSBSim/input_output/FGfdmSocket.cpp
+++ b/src/FDM/JSBSim/input_output/FGfdmSocket.cpp
@@ -39,7 +39,7 @@ INCLUDES
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*/
 
 #if defined(_MSC_VER) || defined(__MINGW32__)
-#include <WS2tcpip.h>
+#include <ws2tcpip.h>
 #else
 #include <fcntl.h>
 #endif

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Saikrishna Arcot <saiarcot895@gmail.com>
Date: Thu, 9 Jun 2016 10:37:53 -0500
Subject: [PATCH] Force static library.


diff --git a/src/GUI/CMakeLists.txt b/src/GUI/CMakeLists.txt
index 1111111..2222222 100644
--- a/src/GUI/CMakeLists.txt
+++ b/src/GUI/CMakeLists.txt
@@ -80,7 +80,7 @@ if (HAVE_QT)
     qt5_add_resources(qrc_sources resources.qrc)
 
 
-    add_library(fglauncher QtLauncher.cxx
+	add_library(fglauncher STATIC QtLauncher.cxx
                             QtLauncher.hxx
                             QtLauncher_private.hxx
                             BaseDiagram.cxx

From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Saikrishna Arcot <saiarcot895@gmail.com>
Date: Thu, 9 Jun 2016 11:03:27 -0500
Subject: [PATCH] Move around library linking order.


diff --git a/src/Main/CMakeLists.txt b/src/Main/CMakeLists.txt
index 1111111..2222222 100644
--- a/src/Main/CMakeLists.txt
+++ b/src/Main/CMakeLists.txt
@@ -133,6 +133,19 @@ endif()
 if(X11_FOUND)
     target_link_libraries(fgfs ${X11_LIBRARIES})
 endif()
+
+if(ENABLE_FLITE)
+    if(SYSTEM_HTS_ENGINE)
+        target_link_libraries(fgfs flite_hts ${HTS_ENGINE_LIBRARIES})
+    else()
+        target_link_libraries(fgfs flite_hts hts_engine)
+    endif()
+endif()
+
+if (Qt5Core_FOUND)
+    target_link_libraries(fgfs Qt5::Widgets fglauncher)
+endif()
+
 target_link_libraries(fgfs
 	${SQLITE3_LIBRARY}
 	${SIMGEAR_LIBRARIES}
@@ -145,20 +158,9 @@ target_link_libraries(fgfs
 	${SIMGEAR_CORE_LIBRARY_DEPENDENCIES}
 	${SIMGEAR_SCENE_LIBRARY_DEPENDENCIES}
 	${PLATFORM_LIBS}
+	ws2_32
 )
 
-if(ENABLE_FLITE)
-    if(SYSTEM_HTS_ENGINE)
-        target_link_libraries(fgfs flite_hts ${HTS_ENGINE_LIBRARIES})
-    else()
-        target_link_libraries(fgfs flite_hts hts_engine)
-    endif()
-endif()
-
-if (Qt5Core_FOUND)
-    target_link_libraries(fgfs Qt5::Widgets fglauncher)
-endif()
-
 if (APPLE)  
     install(TARGETS fgfs BUNDLE DESTINATION .)
 else()
